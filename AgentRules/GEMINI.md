---
trigger: always_on
---

---
trigger: always_on
---

## 프로젝트 초기화 규칙
1. **세션 시작 필수 파일 확인**: 작업 시작 전 반드시 `GEMINI.md`, `README.md`, `PRD.md`, `###-convention.md` 파일이 프로젝트 루트에 존재하는지 확인하고, 있다면 내용을 읽어 프로젝트 컨텍스트를 파악하세요.

## 파일 및 폴더 구조 규칙
2. **소스코드 위치**: 모든 소스코드는 프로젝트 루트가 아닌, 해당 프로젝트명의 하위 폴더에 작성하세요. (예: `ProtocolLib/ProtocolLib/`)
3. **문서 위치 (중요)**: Task, Plan, Implementation Plan, Walkthrough 등 모든 작업 문서는 `docs/artifacts/` 폴더에 저장하세요. 시스템 기본 경로(`C:\Users\...\.gemini\...`)가 아닌 프로젝트 내부 경로를 사용해야 합니다.
4. **코딩 스타일**: `###-convention.md` 파일이 존재하면 해당 규칙을 따라 코드를 작성하세요.
   - 개발언어별 convention.md 파일이 존재하므로 필요에 따라 해당 규칙 참고
   - 예시: c# 언어 - csharp-convention.md, javascript 언어 - javascript-convention.md

## 세션 연속성 규칙
5. **다음 세션 준비**: 작업 종료 시 다음 세션에서 필요한 Task/Plan/Walkthrough 문서를 작성하여 이전 작업을 반복하지 않도록 하세요.

## 사용자 상호작용 규칙
6. **확인 요청**: 구현 방향이 불명확하거나 여러 선택지가 있을 경우, 반드시 사용자에게 확인을 받으세요.
7. **문서 업데이트**: 구현 또는 수정 사항이 있으면 `README.md`를 함께 업데이트하세요.

## Git 규칙
8. **커밋 단위**: 기능 구현 완료 시 작업 내용을 기반으로 명확한 커밋 메시지를 작성하고, 사용자에게 commit message 를 안내하세요.

## 코드 품질 규칙
9. **주석 규칙 (필수)**: 모든 파일, 클래스, 함수, 변수에 Doxygen 형식으로 용도와 사용법을 주석으로 기록하세요.
   - 예시: `/** @brief 함수 설명 @param arg1 매개변수 설명 @return 반환값 설명 */`
10. **빌드/설치 명령 제한 (중요)**: `dotnet build`, `dotnet run`, `npm install` 등 빌드/설치 명령은 **직접 실행하지 말고** 사용자에게 실행 명령어를 안내만 제공하세요.

## 언어 규칙
11. **한글 사용**: 모든 진행상황 보고 및 답변은 한글로 작성하세요.

---

## 토큰 사용량 최적화 규칙 (중요)

### 파일 읽기 최적화
12. **필요한 부분만 읽기**: `view_file` 사용 시 전체 파일 대신 필요한 라인 범위(`StartLine`, `EndLine`)만 지정하세요.
13. **outline 우선 사용**: 파일 탐색 시 `view_file_outline`을 먼저 사용하여 구조를 파악한 후, 필요한 함수/클래스만 `view_code_item`으로 확인하세요.
14. **중복 읽기 금지**: 이미 읽은 파일 내용은 컨텍스트에 유지되므로 동일 파일을 반복해서 읽지 마세요.

### 검색 최적화
15. **정밀 검색**: `grep_search` 사용 시 `Includes` 옵션으로 파일 타입을 제한하세요. (예: `["*.cs"]`)
16. **find_by_name 활용**: 파일 위치를 찾을 때는 `grep_search` 대신 `find_by_name`을 사용하세요.
17. **검색 범위 제한**: 검색 경로를 가능한 한 구체적으로 지정하세요. 프로젝트 루트 대신 하위 폴더를 사용하세요.

### 응답 최적화
18. **간결한 응답**: 불필요한 설명이나 반복을 피하고 핵심 내용만 전달하세요.
19. **코드 중복 최소화**: 변경된 부분만 설명하고, 전체 코드를 반복해서 보여주지 마세요.
20. **점진적 편집**: 파일 전체를 다시 쓰지 말고, `replace_file_content` 또는 `multi_replace_file_content`로 필요한 부분만 수정하세요.

### 도구 호출 최적화
21. **병렬 호출**: 독립적인 도구 호출은 가능한 한 병렬로 실행하세요.
22. **command_status 효율화**: `OutputCharacterCount`를 필요한 최소값으로 설정하세요.
23. **불필요한 확인 생략**: 이미 알고 있는 정보에 대해 다시 확인하는 도구 호출을 피하세요.

### 컨텍스트 관리
24. **이전 대화 참조**: 같은 세션 내에서 이미 논의된 내용은 다시 조회하지 마세요.
25. **요약 활용**: 긴 출력이 예상되면 핵심만 추출하여 요약하세요.
